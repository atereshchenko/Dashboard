@model Dashboard.Models.ViewModel
@{
    Layout = "_Admin";
}

<form role="form" asp-action="create" asp-controller="user" class="row g-3 needs-validation" novalidate>
    @Html.HiddenFor(m => m.User.Id)    
    <div class="col-md-8">
        <label asp-for="@Model.User.Name" class="form-label">Имя</label>
        <input asp-for="@Model.User.Name" type="text" class="form-control" required>
        <div class="invalid-feedback">
           Укажите наименование.
        </div>
    </div>

    <div class="col-md-4">
        <label asp-for="@Model.User.RoleId" class="form-label">Role</label>
        <select class="form-select" asp-for="@Model.User.RoleId" asp-items="@(new SelectList(ViewBag.Roles, "Value", "Text"))"></select>
        <input type="hidden" asp-for="@Model.User.RoleId" />
    </div>

    <div class="col-md-12">
        <label asp-for="@Model.User.Email" class="form-label">Email</label>
        <input asp-for="@Model.User.Email" type="text" class="form-control" required>
        <div class="invalid-feedback">
            Укажите email пользователя
        </div>
    </div>    
    <div class="col-md-12">
        <label asp-for="@Model.User.Password" class="form-label">Пароль</label>
        <input asp-for="@Model.User.Password" type="password" class="form-control" required>
        <div class="invalid-feedback">
            Укажите пароль.
        </div>
    </div>
    <div class="col-md-12">
       <input asp-for="@Model.User.IsActive" type="checkbox" class="btn-check" id="btncheck1" autocomplete="off">
       <label asp-for="@Model.User.IsActive" class="btn btn-sm btn-outline-secondary" for="btncheck1">Вкл/выкл доступ</label>  
    </div>
    <div class="col-12">
        <button class="btn btn-sm btn-success" type="submit">Сохранить</button>
    </div>
</form>

@section VenderScripts
{
    <script src="~/lib/select2-bootstrap-5-theme/js/select2.min.js" ></script>
}

@section CustomScripts
{
    <script>
        $('#usersmenu>a').addClass("active");
        $("#User_RoleId").select2({
            theme: "bootstrap-5",            
            dropdownCssClass: "select2--small",
            minimumResultsForSearch: -1
        });

        (function () {'use strict'
        // Получите все формы, к которым мы хотим применить пользовательские стили проверки Bootstrap
        var forms = document.querySelectorAll('.needs-validation')

        // Зацикливайтесь на них и предотвращайте отправку
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
         })()
    </script>
}
